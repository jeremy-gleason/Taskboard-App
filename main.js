(()=>{"use strict";const t=(t,e)=>{const n=[];return{getTitle:()=>t,getDescription:()=>e,changeTitle:e=>t=e,changeDescription:t=>e=t,getTasks:()=>n,addTask:t=>n.push(t),removeTask:t=>n.splice(t,1)}},e={projectsBody:document.querySelector(".projects-body"),header:document.getElementById("header"),newTitle:document.getElementById("title"),newDescription:document.getElementById("description"),displayProject:function(t,e,n){const i=document.createElement("article");i.setAttribute("id",n);const s=document.createElement("h3");s.innerText=t;const a=document.createElement("p");a.innerText=e;const o=document.createElement("button");o.setAttribute("type","button"),o.classList.add("edit"),o.innerText="Edit";const d=document.createElement("button");d.setAttribute("type","button"),d.classList.add("delete"),d.innerText="Delete";const c=document.createElement("div");c.classList.add("hidden");const r=document.createElement("input");r.setAttribute("type","text"),r.classList.add("new-title"),r.setAttribute("value",t),c.appendChild(r);const l=document.createElement("div");l.classList.add("hidden");const u=document.createElement("textarea");u.setAttribute("rows","3"),u.classList.add("new-descrip"),u.textContent=e,l.appendChild(u);const p=document.createElement("button");p.setAttribute("type","button"),p.classList.add("confirm","hidden"),p.innerText="Confirm";const g=document.createElement("button");g.setAttribute("type","button"),g.classList.add("discard-changes","hidden"),g.innerText="Discard Changes",i.appendChild(s),i.appendChild(a),i.appendChild(o),i.appendChild(d),i.appendChild(c),i.appendChild(l),i.appendChild(p),i.appendChild(g),this.projectsBody.appendChild(i)},updateProject:function(t,e,n){const i=t.childNodes;for(let t=0;t<i.length;t++)"H3"===i[t].tagName&&(i[t].textContent=e),"P"===i[t].tagName&&(i[t].innerText=n)},setHeader(t){this.header.innerText=t},displayMessage:function(t){const e=document.createElement("p");e.setAttribute("id","no-projects"),e.innerText=t,this.projectsBody.appendChild(e)},clearDisplay:function(){for(;this.projectsBody.hasChildNodes();)this.projectsBody.removeChild(this.projectsBody.firstChild)},clearForm:function(){this.newTitle.value="",this.newDescription.value=""},toggleEditMenu:function(t){const e=t.childNodes;for(let t=0;t<e.length;t++)e[t].classList.contains("hidden")?e[t].classList.remove("hidden"):e[t].classList.add("hidden")},updateInputFields:function(t,e,n){const i=t.childNodes;for(let t=0;t<i.length;t++)"DIV"===i[t].tagName&&i[t].firstChild.classList.contains("new-title")&&(i[t].firstChild.value=e),"DIV"===i[t].tagName&&i[t].firstChild.classList.contains("new-descrip")&&(i[t].firstChild.textContent=n)},getTitle:function(){return this.newTitle.value},getDescription:function(){return this.newDescription.value}},n=document.querySelector(".main-nav"),i=document.getElementById("add-new"),s=document.querySelector(".projects-body");function a(){let t;try{t=window.localStorage;const e="__storage_test__";return t.setItem(e,e),t.removeItem(e),!0}catch(e){return e instanceof DOMException&&(22===e.code||1014===e.code||"QuotaExceededError"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name)&&t&&0!==t.length}}function o(t){a()&&(window.localStorage.setItem("titles",d(t,"title")),window.localStorage.setItem("descriptions",d(t,"description")))}function d(t,e){let n="";for(let i=0;i<t.length;i++)n+="title"===e?"///"+t[i].getTitle():"///"+t[i].getDescription();return n}function c(t){e.clearDisplay();for(let n=0;n<t.length;n++){const i=t[n];e.displayProject(i.getTitle(),i.getDescription(),n)}}let r=[];if(a()&&window.localStorage.getItem("titles")){const e=window.localStorage.getItem("titles").split("///"),n=window.localStorage.getItem("descriptions").split("///");if(e.length>1){for(let i=1;i<e.length;i++)r.push(t(e[i],n[i]));c(r)}}n.addEventListener("click",(t=>{"LI"===t.target.tagName&&("nav-about"===t.target.id?(e.clearDisplay(),e.setHeader("About"),e.displayMessage("TaskBoard is an all-in-one project management system that makes it easy to track the work that matters most to you.\n            \n            Get started by creating a new project!")):(e.setHeader("Your Projects"),0===r.length?(e.clearDisplay(),e.displayMessage("You haven't added any projects yet.")):c(r)))})),i.addEventListener("click",(function(n){const i=e.getTitle(),s=e.getDescription(),a=t(i,s);r.push(a),o(r),e.clearForm(),e.setHeader("Your Projects"),c(r)})),s.addEventListener("click",(function(t){var n;t.target.classList.contains("edit")&&e.toggleEditMenu(t.target.parentNode),t.target.classList.contains("delete")&&function(t){const n=parseInt(t.getAttribute("id"));r.splice(n,1),o(r),c(r),0===r.length&&e.displayMessage("You haven't added any projects yet.")}(t.target.parentNode),t.target.classList.contains("confirm")&&function(t){let n,i;const s=t.childNodes;for(let t=0;t<s.length;t++)"DIV"===s[t].tagName&&s[t].firstChild.classList.contains("new-title")&&(n=s[t].firstChild.value),"DIV"===s[t].tagName&&s[t].firstChild.classList.contains("new-descrip")&&(i=s[t].firstChild.value);r[t.getAttribute("id")].changeTitle(n),r[t.getAttribute("id")].changeDescription(i),o(r),e.updateProject(t,n,i),e.toggleEditMenu(t)}(t.target.parentNode),t.target.classList.contains("discard-changes")&&(n=t.target.parentNode,e.updateInputFields(n,r[n.getAttribute("id")].getTitle(),r[n.getAttribute("id")].getDescription()),e.toggleEditMenu(t.target.parentNode))}))})();